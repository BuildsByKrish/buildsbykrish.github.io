<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Hindi Series Vault | Krish Vault</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

  <script defer src="hindirecommendations.js"></script>

  <style>
    /* General Body and HTML structure styles */
    body {
        font-family: 'Poppins', sans-serif;
        margin: 0;
        padding: 0;
        background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
        color: #e0e0e0; /* Light text for dark background */
        line-height: 1.6;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        position: relative;
        overflow-x: hidden; /* Prevent horizontal scroll from subtle effects */
        padding-bottom: 5rem; /* Space for fixed buttons */
    }

    /* Subtle background animation/effect */
    body::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle at top left, rgba(0, 210, 255, 0.1) 0%, transparent 30%),
                    radial-gradient(circle at bottom right, rgba(0, 210, 255, 0.1) 0%, transparent 30%);
        opacity: 0.5;
        z-index: -1;
        pointer-events: none;
    }

    h1, h2, h3 {
        font-weight: 600;
        color: #00d2ff; /* Default heading color */
    }

    /* Hero Banner / Main Heading for Hindi Series Vault */
    h1 {
        text-align: center;
        font-size: 3.5em; /* Larger, more impactful */
        margin-top: 3rem;
        margin-bottom: 2rem;
        color: #e0f7fa; /* Lighter, more ethereal blue */
        text-shadow: 0 0 20px rgba(0, 210, 255, 0.8), 0 0 40px rgba(0, 210, 255, 0.4);
        letter-spacing: 2px;
        position: relative;
        padding-bottom: 10px;
    }

    h1::after {
        content: '';
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        bottom: 0;
        width: 80%;
        max-width: 400px;
        height: 3px;
        background: linear-gradient(90deg, transparent, #00d2ff, transparent);
        box-shadow: 0 0 15px #00d2ff;
        border-radius: 5px;
    }

    /* Filter and Sort Controls */
    .filters {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem; /* Increased gap for better spacing */
        justify-content: center;
        align-items: center;
        margin: 2rem auto; /* More vertical margin */
        padding: 1.5rem 1rem;
        max-width: 90%;
        background: rgba(255, 255, 255, 0.08); /* Glassy background */
        border: 1px solid rgba(255, 255, 255, 0.15);
        border-radius: 12px;
        backdrop-filter: blur(10px);
        box-shadow: 0 0 15px rgba(0, 210, 255, 0.2);
    }

    .filters select,
    .filters input,
    .filters button {
        white-space: nowrap;
        flex-shrink: 0;
        padding: 0.7rem 1.2rem; /* More padding for better touch targets */
        background: rgba(0, 0, 0, 0.4); /* Darker, more opaque glass for controls */
        color: #ffeb3b; /* Golden text for controls */
        border: 1px solid rgba(255, 204, 0, 0.5); /* Golden border */
        border-radius: 8px; /* More rounded */
        font-size: 1em;
        cursor: pointer;
        transition: all 0.3s ease;
        text-shadow: 0 0 5px rgba(255, 204, 0, 0.3);
    }

    .filters select:hover,
    .filters input:hover,
    .filters button:hover {
        background: rgba(255, 204, 0, 0.1); /* Lighter golden glass on hover */
        border-color: #ffeb3b; /* Brighter golden border */
        box-shadow: 0 0 15px rgba(255, 204, 0, 0.5);
        color: #fff;
    }

    .filters input::placeholder {
        color: rgba(255, 255, 255, 0.6);
    }
    .filters input:focus {
        outline: none;
        border-color: #00d2ff;
        box-shadow: 0 0 15px rgba(0, 210, 255, 0.5);
    }

    /* Main Grid Container for Series Cards */
    .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* Min width for cards */
        gap: 2.5rem; /* Generous space between cards */
        width: 100%;
        max-width: 1400px; /* Wider grid for more cards per row */
        padding: 0 2rem; /* Padding on sides */
        box-sizing: border-box; /* Include padding in width */
    }

    /* --- EPIC SERIES CARD STYLES (poster-tile) --- */
    .poster-tile {
        background: linear-gradient(145deg, rgba(255, 255, 255, 0.08) 0%, rgba(0, 210, 255, 0.04) 100%);
        border: 1px solid;
        border-image-slice: 1;
        border-image-source: linear-gradient(45deg, rgba(0,210,255,0.4), rgba(255,255,255,0.2)); /* Initial blue glow */
        border-radius: 20px;
        padding: 1.8rem; /* Adjusted padding */
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.7), /* Deeper initial shadow */
                    inset 0 0 10px rgba(255, 255, 255, 0.03); /* Subtle inner light */
        transition: all 0.6s cubic-bezier(0.25, 0.8, 0.25, 1); /* Slower, more elegant transition */
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        position: relative;
        overflow: hidden; /* Crucial for description toggle */
        min-height: 280px; /* Base height for cards before expansion */
        text-align: left; /* Align content to left within card */
        filter: drop-shadow(0 0 5px rgba(0, 210, 255, 0.2)); /* Initial subtle glow */
    }

    /* Pseudo-element for subtle top-left light shimmer */
    .poster-tile::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle at 100% 0%, rgba(255,255,255,0.06) 0%, transparent 60%);
        opacity: 0;
        transition: opacity 0.5s ease;
        z-index: 1; /* Above background but below content */
        pointer-events: none;
    }

    /* Hover effect for all epic series cards */
    .poster-tile:hover {
        transform: translateY(-12px) scale(1.02); /* Lifts higher and slightly scales */
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.8), /* Deeper shadow on hover */
                    0 0 40px rgba(0, 210, 255, 0.7), /* Pronounced blue glow */
                    0 0 60px rgba(255, 165, 0, 0.3); /* Added a warm accent glow */
        background: linear-gradient(145deg, rgba(0, 210, 255, 0.15) 0%, rgba(255, 255, 255, 0.08) 100%); /* Brighter background */
        border-image-source: linear-gradient(45deg, #00d2ff, #a0ffff, #ffcc00); /* Dynamic border color */
        filter: drop-shadow(0 0 15px rgba(0, 210, 255, 1)); /* Stronger filter glow */
    }

    .poster-tile:hover::before {
        opacity: 1; /* Activate shimmer on hover */
    }

    .poster-info {
        position: relative; /* For z-index to be effective */
        z-index: 2; /* Ensure info is above pseudo-elements */
    }

    .poster-tile h3 {
        color: #e0f7fa; /* Lighter blue for primary text */
        font-size: 1.8em; /* Adjusted heading size */
        margin-top: 0;
        margin-bottom: 0.7rem;
        line-height: 1.3;
        letter-spacing: 0.5px;
        text-shadow: 0 0 10px rgba(0, 210, 255, 1), 0 0 20px rgba(255, 165, 0, 0.4); /* Blue + subtle orange glow */
        font-weight: 700;
        word-wrap: break-word; /* Ensure long titles wrap */
    }

    .poster-tile .tags {
        display: flex;
        flex-wrap: wrap;
        gap: 0.6rem; /* Space between tags */
        margin-bottom: 1rem;
    }

    .poster-tile .tag {
        background: rgba(0, 210, 255, 0.1); /* Subtle blue tag background */
        color: #90ee90; /* Light green for better visibility of tags */
        padding: 0.3em 0.7em;
        border-radius: 5px;
        font-size: 0.85em;
        font-weight: 600;
        border: 1px solid rgba(0, 210, 255, 0.3);
        backdrop-filter: blur(3px);
    }
    .poster-tile .tag[data-genre*="crime"],
    .poster-tile .tag[data-genre*="thriller"] { background: rgba(255, 99, 71, 0.1); border-color: rgba(255, 99, 71, 0.3); color: #ffcccb; } /* Orange-red for crime/thriller */
    .poster-tile .tag[data-genre*="drama"] { background: rgba(138, 43, 226, 0.1); border-color: rgba(138, 43, 226, 0.3); color: #e6e6fa; } /* Purple for drama */
    .poster-tile .tag[data-genre*="comedy"] { background: rgba(50, 205, 50, 0.1); border-color: rgba(50, 205, 50, 0.3); } /* Lime green for comedy */
    .poster-tile .tag[data-genre*="spy"] { background: rgba(255, 165, 0, 0.1); border-color: rgba(255, 165, 0, 0.3); color: #ffe0b3; } /* Orange for spy */

    .poster-tile p:not(.description-text) { /* Styles for seasons/episodes/runtime */
        font-size: 0.9em;
        color: #cce7e4; /* Softer light blue */
        margin-top: 0.5rem;
        margin-bottom: 0.8rem;
    }

    /* Specific EPIC style for Must-Watch cards */
    .poster-tile.must-watch {
        border-image-source: linear-gradient(45deg, #ffcc00, #ffed82, #ff8c00); /* Richer gold-orange gradient */
        filter: drop-shadow(0 0 8px rgba(255, 204, 0, 0.8)); /* Stronger initial gold glow */
    }

    .poster-tile.must-watch h3 {
        color: #ffeb3b; /* Bright gold for text */
        text-shadow: 0 0 15px rgba(255, 204, 0, 1), 0 0 30px rgba(255, 165, 0, 0.4); /* More intense gold-orange glow */
    }
    .poster-tile.must-watch .tag {
        background: rgba(255, 204, 0, 0.1);
        border-color: rgba(255, 204, 0, 0.5);
        color: #fffacd;
    }

    .poster-tile.must-watch:hover {
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.9),
                    0 0 50px rgba(255, 204, 0, 0.9), /* Intense gold glow */
                    0 0 70px rgba(255, 140, 0, 0.4); /* Deeper orange accent glow */
        background: linear-gradient(145deg, rgba(255, 204, 0, 0.15) 0%, rgba(255, 255, 255, 0.08) 100%);
        border-image-source: linear-gradient(45deg, #ffcc00, #fff8dc, #ffa07a); /* Brighter, dynamic gold border */
        filter: drop-shadow(0 0 20px rgba(255, 204, 0, 1.2));
    }


    /* Description Toggle Button */
    .description-toggle-btn {
        background: rgba(255, 255, 255, 0.1);
        color: #00d2ff;
        border: 1px solid #00d2ff;
        padding: 0.6em 1em;
        border-radius: 8px;
        cursor: pointer;
        font-size: 0.85em;
        font-weight: 600;
        margin-top: 1rem;
        transition: all 0.3s ease;
        backdrop-filter: blur(5px);
        align-self: flex-start; /* Align button to start within flex column */
    }

    .description-toggle-btn:hover {
        background: #00d2ff;
        color: #1a1a2e;
        box-shadow: 0 0 15px rgba(0, 210, 255, 0.6);
        transform: translateY(-2px);
    }
    .poster-tile.must-watch .description-toggle-btn {
        background: rgba(255, 204, 0, 0.1);
        color: #ffcc00;
        border-color: #ffcc00;
    }
    .poster-tile.must-watch .description-toggle-btn:hover {
        background: #ffcc00;
        color: #1a1a2e;
        box-shadow: 0 0 15px rgba(255, 204, 0, 0.6);
        transform: translateY(-2px);
    }

    /* Description text */
    .description-text {
        font-size: 0.9em;
        color: #b0c4de; /* Softer blue-grey for description */
        margin-top: 0.5rem;
        margin-bottom: 0;
        max-height: 3.8em; /* Approximately 3 lines */
        overflow: hidden;
        text-overflow: ellipsis;
        transition: max-height 0.7s ease-in-out, opacity 0.7s ease-in-out; /* Smooth transition */
        opacity: 0.9;
    }

    .description-text.expanded {
        max-height: 1000px; /* Large enough to show full content */
        opacity: 1;
    }

    /* Scroll to Top Button */
    #topBtn {
        display: none; /* Hidden by default */
        position: fixed; /* Fixed position */
        bottom: 20px; /* Place at the bottom */
        right: 30px; /* Place at the right */
        z-index: 99; /* Make sure it's above other elements */
        border: none; /* Remove borders */
        outline: none; /* Remove outline */
        background-color: rgba(0, 210, 255, 0.5); /* Semi-transparent blue */
        color: white; /* White text */
        cursor: pointer; /* Add a mouse pointer on hover */
        padding: 15px; /* Some padding */
        border-radius: 10px; /* Rounded corners */
        font-size: 18px; /* Increase font size */
        transition: background-color 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
        box-shadow: 0 4px 12px rgba(0, 210, 255, 0.3);
    }

    #topBtn:hover {
        background-color: #00d2ff; /* Deeper blue on hover */
        transform: translateY(-3px); /* Slightly lift button */
        box-shadow: 0 6px 20px rgba(0, 210, 255, 0.5);
    }

    /* Footer Styles */
    footer {
      margin-top: 4rem;
      padding: 1.5rem;
      text-align: center;
      color: rgba(255, 255, 255, 0.6);
      font-size: 0.9em;
      width: 100%;
      background: rgba(0, 0, 0, 0.2);
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(5px);
    }

    footer a {
      color: #00d2ff;
      text-decoration: none;
      font-weight: 600;
      transition: color 0.3s ease;
    }

    footer a:hover {
      color: #ffeb3b;
      text-decoration: underline;
    }

    /* Responsive Adjustments */
    @media (max-width: 768px) {
        h1 {
            font-size: 2.5em;
        }
        .filters {
            flex-direction: column;
            gap: 0.8rem;
            padding: 1rem;
        }
        .filters select,
        .filters input,
        .filters button {
            width: 100%; /* Full width on smaller screens */
            padding: 0.8rem 1rem;
        }
        .grid {
            grid-template-columns: 1fr; /* Single column on very small screens */
            padding: 0 1rem;
            gap: 2rem;
        }
        .poster-tile {
            padding: 1.5rem;
            min-height: 250px;
        }
        .poster-tile h3 {
            font-size: 1.5em;
        }
    }
  </style>
</head>
<body>

  <h1>Hindi Series Vault</h1>

  <div class="filters">
    <select onchange="filterByGenre(this.value)">
      <option value="All">All Genres</option>
      </select>

    <select onchange="filterByPlatform(this.value)">
      <option value="All">All Platforms</option>
      </select>

    <select onchange="filterByYear(this.value)">
        <option value="All">All Years</option>
        </select>

    <select onchange="sortBy(this.value)">
      <option value="">Sort By</option>
      <option value="imdbRating">IMDb Rating</option>
      <option value="popularity">Popularity</option>
      <option value="year">Newest First</option>
      <option value="titleAsc">Title (A-Z)</option>
      <option value="titleDesc">Title (Z-A)</option>
    </select>

    <input type="text" id="searchBar" onkeyup="searchTitles(this.value)" placeholder="Search titles..." />

    <button onclick="filterMustWatch()">Must Watch 🔥</button>
    <button onclick="resetFilters()">Reset Filters</button>
  </div>

  <div class="grid" id="hindiGrid">
    </div>

  <button onclick="topFunction()" id="topBtn" title="Go to top">⬆️</button>

  <footer>
    <p>&copy; <span id="currentYear"></span> Krish Vault. All rights reserved.</p>
    <p>Data is for informational purposes only. Series ratings and details may vary.</p>
    <p>Made with ❤️ by Krish</p>
  </footer>

  <script>
    let currentList = []; // Holds the currently displayed list based on filters/sorts
    let initialLoadDone = false; // Flag to ensure initial sort only happens once

    // Function to populate unique filter options
    function populateFilterOptions() {
        const genres = [...new Set(hindiWatchlist.map(item => item.genre))].sort();
        const genreSelect = document.querySelector('select[onchange="filterByGenre(this.value)"]');
        genres.forEach(genre => {
            const option = document.createElement('option');
            option.value = genre;
            option.textContent = genre;
            genreSelect.appendChild(option);
        });

        const platforms = [...new Set(hindiWatchlist.map(item => item.platform))].sort();
        const platformSelect = document.querySelector('select[onchange="filterByPlatform(this.value)"]');
        platforms.forEach(platform => {
            const option = document.createElement('option');
            option.value = platform;
            option.textContent = platform;
            platformSelect.appendChild(option);
        });

        const years = [...new Set(hindiWatchlist.map(item => item.year))].sort((a, b) => b - a); // Sort years descending
        const yearSelect = document.querySelector('select[onchange="filterByYear(this.value)"]');
        years.forEach(year => {
            const option = document.createElement('option');
            option.value = year;
            option.textContent = year;
            yearSelect.appendChild(option);
        });
    }

    // Function to display series cards
    function display(list) {
      const hindiGrid = document.getElementById("hindiGrid");
      hindiGrid.innerHTML = ""; // Clear existing cards

      if (list.length === 0) {
        hindiGrid.innerHTML = "<p style='text-align:center; color: #ff6666; font-size: 1.2em; margin-top: 3rem;'>No series found matching your criteria.</p>";
        return;
      }

      list.forEach((show) => {
        const tile = document.createElement("div");
        // Use show.mustwatch directly for the class
        tile.className = `poster-tile ${show.mustwatch ? 'must-watch' : ''}`;
        
        tile.innerHTML = `
          <div class="poster-info">
            <h3>${show.title}</h3>
            <div class="tags">
                <span class="tag" data-genre="${show.genre.toLowerCase()}">${show.genre}</span>
                <span class="tag">${show.platform}</span>
                <span class="tag">${show.year}</span>
            </div>
            <p>Seasons: ${show.seasons} | Episodes: ${show.episodes} | Runtime: ${show.runtime}</p>
            <p>IMDb: ${show.imdbRating} | Popularity: ${show.popularity}%</p>
            <div id="desc-${show.id}" class="description-text">
                ${show.description}
            </div>
            <button class="description-toggle-btn" onclick="toggleDescription(event, ${show.id})">View Details</button>
          </div>
        `;
        hindiGrid.appendChild(tile);
      });
    }

    // Function to toggle description visibility
    function toggleDescription(event, id) {
        const descriptionContainer = document.getElementById(`desc-${id}`);
        const button = event.target;
        const card = button.closest('.poster-tile');

        if (descriptionContainer.classList.contains('expanded')) {
            descriptionContainer.classList.remove('expanded');
            button.textContent = 'View Details';
            card.style.minHeight = '280px'; // Reset to base min-height
        } else {
            descriptionContainer.classList.add('expanded');
            button.textContent = 'Hide Details';
            card.style.minHeight = 'fit-content'; // Let it grow
            // After expansion, force a reflow to recalculate min-height
            setTimeout(() => {
                card.style.minHeight = `${card.scrollHeight + 20}px`; // Add some buffer
            }, 700); // After transition finishes
        }
    }

    // Filter functions
    function filterByGenre(genre) {
      currentList = genre === "All" ? [...hindiWatchlist] : hindiWatchlist.filter((s) => s.genre === genre);
      display(currentList);
    }

    function filterByPlatform(platform) {
        currentList = platform === "All" ? [...hindiWatchlist] : hindiWatchlist.filter(s => s.platform === platform);
        display(currentList);
    }

    function filterByYear(year) {
        currentList = year === "All" ? [...hindiWatchlist] : hindiWatchlist.filter(s => s.year == parseInt(year));
        display(currentList);
    }

    function filterMustWatch() {
      // Filter directly by the mustwatch flag
      currentList = hindiWatchlist.filter(s => s.mustwatch === true);
      display(currentList);
    }

    function searchTitles(query) {
      currentList = hindiWatchlist.filter(s =>
        s.title.toLowerCase().includes(query.toLowerCase())
      );
      display(currentList);
    }

    function sortBy(type) {
      let sorted = [...currentList]; // Sort the currently filtered/searched list
      switch (type) {
        case "imdbRating":
          sorted.sort((a, b) => b.imdbRating - a.imdbRating); break;
        case "popularity":
          sorted.sort((a, b) => b.popularity - a.popularity); break;
        case "year":
          sorted.sort((a, b) => b.year - a.year); break;
        case "titleAsc":
          sorted.sort((a, b) => a.title.localeCompare(b.title)); break;
        case "titleDesc":
          sorted.sort((a, b) => b.title.localeCompare(a.title)); break;
      }
      display(sorted);
    }

    // Reset Filters Function
    function resetFilters() {
      currentList = [...hindiWatchlist]; // Reset to original list
      document.querySelector('select[onchange="filterByGenre(this.value)"]').value = 'All';
      document.querySelector('select[onchange="filterByPlatform(this.value)"]').value = 'All';
      document.querySelector('select[onchange="filterByYear(this.value)"]').value = 'All';
      document.querySelector('select[onchange="sortBy(this.value)"]').value = ''; // Reset sort dropdown
      document.getElementById('searchBar').value = ''; // Clear search bar
      
      // Re-apply initial sort if desired
      sortBy('imdbRating'); // Sort by IMDb Rating by default on reset
      console.log("✅ Filters Reset.");
    }

    // Scroll to top button logic
    let mybutton = document.getElementById("topBtn");
    window.onscroll = function() {scrollFunction()};
    function scrollFunction() {
      if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
        mybutton.style.display = "block";
      } else {
        mybutton.style.display = "none";
      }
    }
    function topFunction() {
      document.body.scrollTop = 0; // For Safari
      document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
    }

    // Initial Load - Important: ensure hindirecommendations.js is loaded first
    window.onload = () => {
      document.getElementById("currentYear").textContent = new Date().getFullYear();
      populateFilterOptions();
      // Ensure hindiWatchlist is available from the external JS file
      if (typeof hindiWatchlist !== 'undefined') {
        currentList = [...hindiWatchlist];
        sortBy('imdbRating'); // Initial sort by IMDb Rating
        initialLoadDone = true;
        console.log("✅ Hindi Vault Loaded:", hindiWatchlist.length, "series.");
      } else {
        console.error("❌ hindiWatchlist data not found. Make sure hindirecommendations.js is loaded correctly.");
        document.getElementById("hindiGrid").innerHTML = "<p style='text-align:center; color: #ff6666; font-size: 1.2em; margin-top: 3rem;'>Error loading data. Please check hindirecommendations.js file.</p>";
      }
    };
  </script>
</body>
</html>
