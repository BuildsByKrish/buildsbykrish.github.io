<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Hindi Series Vault | Krish Vault</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

  <script defer src="hindirecommendations.js"></script>

  <style>
    /* General Body and HTML structure styles */
    body {
        font-family: 'Poppins', sans-serif;
        margin: 0;
        padding: 0;
        background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
        color: #e0e0e0; /* Light text for dark background */
        line-height: 1.6;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        position: relative;
        overflow-x: hidden; /* Prevent horizontal scroll from subtle effects */
        padding-bottom: 5rem; /* Space for fixed buttons */
    }

    /* Subtle background animation/effect */
    body::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle at top left, rgba(0, 210, 255, 0.1) 0%, transparent 30%),
                    radial-gradient(circle at bottom right, rgba(0, 210, 255, 0.1) 0%, transparent 30%);
        opacity: 0.5;
        z-index: -1;
        pointer-events: none;
    }

    h1, h2, h3 {
        font-weight: 600;
        color: #00d2ff; /* Default heading color */
    }

    /* Hero Banner / Main Heading for Hindi Series Vault */
    h1 {
        text-align: center;
        font-size: 3.5em; /* Larger, more impactful */
        margin-top: 3rem;
        margin-bottom: 2rem;
        color: #e0f7fa; /* Lighter, more ethereal blue */
        text-shadow: 0 0 20px rgba(0, 210, 255, 0.8), 0 0 40px rgba(0, 210, 255, 0.4);
        letter-spacing: 2px;
        position: relative;
        padding-bottom: 10px;
    }

    h1::after {
        content: '';
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        bottom: 0;
        width: 80%;
        max-width: 400px;
        height: 3px;
        background: linear-gradient(90deg, transparent, #00d2ff, transparent);
        box-shadow: 0 0 15px #00d2ff;
        border-radius: 5px;
    }

    /* Filter and Sort Controls */
    .filters {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem; /* Increased gap for better spacing */
        justify-content: center;
        align-items: center;
        margin: 2rem auto; /* More vertical margin */
        padding: 1.5rem 1rem;
        max-width: 90%;
        background: rgba(255, 255, 255, 0.08); /* Glassy background */
        border: 1px solid rgba(255, 255, 255, 0.15);
        border-radius: 12px;
        backdrop-filter: blur(10px);
        box-shadow: 0 0 15px rgba(0, 210, 255, 0.2);
    }

    .filters select,
    .filters input,
    .filters button {
        white-space: nowrap;
        flex-shrink: 0;
        padding: 0.7rem 1.2rem; /* More padding for better touch targets */
        background: rgba(0, 0, 0, 0.4); /* Darker, more opaque glass for controls */
        color: #ffeb3b; /* Golden text for controls */
        border: 1px solid rgba(255, 204, 0, 0.5); /* Golden border */
        border-radius: 8px; /* More rounded */
        font-size: 1em;
        cursor: pointer;
        transition: all 0.3s ease;
        text-shadow: 0 0 5px rgba(255, 204, 0, 0.3);
    }

    .filters select:hover,
    .filters input:hover,
    .filters button:hover {
        background: rgba(255, 204, 0, 0.1); /* Lighter golden glass on hover */
        border-color: #ffeb3b; /* Brighter golden border */
        box-shadow: 0 0 15px rgba(255, 204, 0, 0.5);
        color: #fff;
    }

    .filters input::placeholder {
        color: rgba(255, 255, 255, 0.6);
    }
    .filters input:focus {
        outline: none;
        border-color: #00d2ff;
        box-shadow: 0 0 15px rgba(0, 210, 255, 0.5);
    }

    /* Main Grid Container for Series Cards */
    .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* Min width for cards */
        gap: 2.5rem; /* Generous space between cards */
        width: 100%;
        max-width: 1400px; /* Wider grid for more cards per row */
        padding: 0 2rem; /* Padding on sides */
        box-sizing: border-box; /* Include padding in width */
    }

    /* --- EPIC SERIES CARD STYLES (poster-tile) --- */
    .poster-tile {
        background: linear-gradient(145deg, rgba(255, 255, 255, 0.08) 0%, rgba(0, 210, 255, 0.04) 100%);
        border: 1px solid;
        border-image-slice: 1;
        border-image-source: linear-gradient(45deg, rgba(0,210,255,0.4), rgba(255,255,255,0.2)); /* Initial blue glow */
        border-radius: 20px;
        padding: 1.8rem; /* Adjusted padding */
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.7), /* Deeper initial shadow */
                    inset 0 0 10px rgba(255, 255, 255, 0.03); /* Subtle inner light */
        transition: all 0.6s cubic-bezier(0.25, 0.8, 0.25, 1); /* Slower, more elegant transition */
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        position: relative;
        overflow: hidden; /* Crucial for description toggle */
        min-height: 280px; /* Base height for cards before expansion */
        text-align: left; /* Align content to left within card */
        filter: drop-shadow(0 0 5px rgba(0, 210, 255, 0.2)); /* Initial subtle glow */
    }

    /* Pseudo-element for subtle top-left light shimmer */
    .poster-tile::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle at 100% 0%, rgba(255,255,255,0.06) 0%, transparent 60%);
        opacity: 0;
        transition: opacity 0.5s ease;
        z-index: 1; /* Above background but below content */
        pointer-events: none;
    }

    /* Hover effect for all epic series cards */
    .poster-tile:hover {
        transform: translateY(-12px) scale(1.02); /* Lifts higher and slightly scales */
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.8), /* Deeper shadow on hover */
                    0 0 40px rgba(0, 210, 255, 0.7), /* Pronounced blue glow */
                    0 0 60px rgba(255, 165, 0, 0.3); /* Added a warm accent glow */
        background: linear-gradient(145deg, rgba(0, 210, 255, 0.15) 0%, rgba(255, 255, 255, 0.08) 100%); /* Brighter background */
        border-image-source: linear-gradient(45deg, #00d2ff, #a0ffff, #ffcc00); /* Dynamic border color */
        filter: drop-shadow(0 0 15px rgba(0, 210, 255, 1)); /* Stronger filter glow */
    }

    .poster-tile:hover::before {
        opacity: 1; /* Activate shimmer on hover */
    }

    .poster-info {
        position: relative; /* For z-index to be effective */
        z-index: 2; /* Ensure info is above pseudo-elements */
    }

    .poster-tile h3 {
        color: #e0f7fa; /* Lighter blue for primary text */
        font-size: 1.8em; /* Adjusted heading size */
        margin-top: 0;
        margin-bottom: 0.7rem;
        line-height: 1.3;
        letter-spacing: 0.5px;
        text-shadow: 0 0 10px rgba(0, 210, 255, 1), 0 0 20px rgba(255, 165, 0, 0.4); /* Blue + subtle orange glow */
        font-weight: 700;
        word-wrap: break-word; /* Ensure long titles wrap */
    }

    .poster-tile .tags {
        display: flex;
        flex-wrap: wrap;
        gap: 0.6rem; /* Space between tags */
        margin-bottom: 1rem;
    }

    .poster-tile .tag {
        background: rgba(0, 210, 255, 0.1); /* Subtle blue tag background */
        color: #90ee90; /* Light green for better visibility of tags */
        padding: 0.3em 0.7em;
        border-radius: 5px;
        font-size: 0.85em;
        font-weight: 600;
        border: 1px solid rgba(0, 210, 255, 0.3);
        backdrop-filter: blur(3px);
    }
    .poster-tile .tag[data-genre*="crime"],
    .poster-tile .tag[data-genre*="thriller"] { background: rgba(255, 99, 71, 0.1); border-color: rgba(255, 99, 71, 0.3); color: #ffcccb; } /* Orange-red for crime/thriller */
    .poster-tile .tag[data-genre*="drama"] { background: rgba(138, 43, 226, 0.1); border-color: rgba(138, 43, 226, 0.3); color: #e6e6fa; } /* Purple for drama */
    .poster-tile .tag[data-genre*="comedy"] { background: rgba(50, 205, 50, 0.1); border-color: rgba(50, 205, 50, 0.3); } /* Lime green for comedy */
    .poster-tile .tag[data-genre*="spy"] { background: rgba(255, 165, 0, 0.1); border-color: rgba(255, 165, 0, 0.3); color: #ffe0b3; } /* Orange for spy */

    .poster-tile p:not(.description-text) { /* Styles for seasons/episodes/runtime */
        font-size: 0.9em;
        color: #cce7e4; /* Softer light blue */
        margin-top: 0.5rem;
        margin-bottom: 0.8rem;
    }

    /* Specific EPIC style for Must-Watch cards */
    .poster-tile.must-watch {
        border-image-source: linear-gradient(45deg, #ffcc00, #ffed82, #ff8c00); /* Richer gold-orange gradient */
        filter: drop-shadow(0 0 8px rgba(255, 204, 0, 0.8)); /* Stronger initial gold glow */
    }

    .poster-tile.must-watch h3 {
        color: #ffeb3b; /* Bright gold for text */
        text-shadow: 0 0 15px rgba(255, 204, 0, 1), 0 0 30px rgba(255, 165, 0, 0.6); /* More intense gold-orange glow */
    }
    .poster-tile.must-watch .tag {
        background: rgba(255, 204, 0, 0.1);
        border-color: rgba(255, 204, 0, 0.5);
        color: #fffacd;
    }

    .poster-tile.must-watch:hover {
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.9),
                    0 0 50px rgba(255, 204, 0, 0.9), /* Intense gold glow */
                    0 0 70px rgba(255, 140, 0, 0.4); /* Deeper orange accent glow */
        background: linear-gradient(145deg, rgba(255, 204, 0, 0.15) 0%, rgba(255, 255, 255, 0.08) 100%);
        border-image-source: linear-gradient(45deg, #ffcc00, #fff8dc, #ffa07a); /* Brighter, dynamic gold border */
        filter: drop-shadow(0 0 20px rgba(255, 204, 0, 1.2));
    }


    /* Description Toggle Button */
    .description-toggle-btn {
        background: rgba(255, 255, 255, 0.1);
        color: #00d2ff;
        border: 1px solid #00d2ff;
        padding: 0.6em 1em;
        border-radius: 8px;
        cursor: pointer;
        font-size: 0.85em;
        font-weight: 600;
        margin-top: 1rem;
        transition: all 0.3s ease;
        backdrop-filter: blur(5px);
        align-self: flex-start; /* Align button to start within flex column */
    }

    .description-toggle-btn:hover {
        background: #00d2ff;
        color: #1a1a2e;
        box-shadow: 0 0 15px rgba(0, 210, 255, 0.6);
        transform: translateY(-2px);
    }
    .poster-tile.must-watch .description-toggle-btn {
        background: rgba(255, 204, 0, 0.1);
        color: #ffcc00;
        border-color: #ffcc00;
    }
    .poster-tile.must-watch .description-toggle-btn:hover {
        background: #ffcc00;
        color: #1a1a2e;
        box-shadow: 0 0 15px rgba(255, 204, 0, 0.8);
    }

    /* Description Text - Initially hidden and smoothly revealed */
    .description-container {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.7s ease-in-out, opacity 0.5s ease;
        opacity: 0;
        padding-top: 0; /* No initial padding */
    }

    .description-container.expanded {
        max-height: 200px; /* Sufficient height for most descriptions, adjust if needed */
        opacity: 1;
        padding-top: 1rem; /* Add padding when expanded */
    }

    .description-text {
        font-size: 0.9em; /* Smaller font for detailed text */
        color: #b0c4de; /* Softer text color */
        margin-top: 0.5rem;
        line-height: 1.5;
    }

    /* Scroll to Top & Home Buttons */
    .top-btn, .home-btn {
        position: fixed;
        bottom: 1.5rem;
        right: 1.5rem;
        background: rgba(0, 210, 255, 0.2);
        color: #e0f7fa;
        border: 1px solid rgba(0, 210, 255, 0.5);
        padding: 0.8rem 1.2rem;
        border-radius: 50%; /* Circle shape */
        font-size: 1.2em;
        cursor: pointer;
        transition: all 0.3s ease;
        z-index: 999;
        display: none; /* Hidden by default, shown by JS */
        backdrop-filter: blur(8px);
        box-shadow: 0 0 15px rgba(0, 210, 255, 0.4);
    }

    .home-btn {
        right: calc(1.5rem + 70px); /* Positioned next to top-btn */
        border-radius: 8px; /* Square shape for home button */
        font-size: 1em;
        padding: 0.8rem 1.5rem;
    }

    .top-btn:hover, .home-btn:hover {
        background: #00d2ff;
        color: #1a1a2e;
        box-shadow: 0 0 25px rgba(0, 210, 255, 0.8);
        transform: translateY(-3px);
    }
    
    /* Responsive adjustments */
    @media (max-width: 1200px) {
        .grid {
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            padding: 0 1.5rem;
        }
    }

    @media (max-width: 768px) {
        h1 {
            font-size: 2.5em;
            margin-top: 2rem;
            margin-bottom: 1.5rem;
        }
        h1::after {
            width: 70%;
            bottom: -5px;
        }
        .filters {
            gap: 0.75rem;
            padding: 1rem;
            margin: 1.5rem auto;
            max-width: 95%;
        }
        .filters select,
        .filters input,
        .filters button {
            font-size: 0.9em;
            padding: 0.6rem 1rem;
        }
        .grid {
            grid-template-columns: 1fr; /* Stack cards on small screens */
            gap: 1.5rem;
            padding: 0 1rem;
        }
        .poster-tile {
            padding: 1.5rem;
            min-height: 250px; /* Adjust min-height for stacked cards */
            border-radius: 15px;
        }
        .poster-tile h3 {
            font-size: 1.6em;
            margin-bottom: 0.5rem;
        }
        .poster-tile .tag {
            font-size: 0.8em;
            padding: 0.25em 0.6em;
        }
        .poster-tile p:not(.description-text), .description-text {
            font-size: 0.8em;
        }
        .description-toggle-btn {
            padding: 0.5em 0.8em;
            font-size: 0.8em;
            margin-top: 0.8rem;
        }
        .top-btn, .home-btn {
            bottom: 1rem;
            right: 1rem;
            padding: 0.7rem 1rem;
            font-size: 1em;
        }
        .home-btn {
            right: calc(1rem + 55px);
            padding: 0.7rem 1.2rem;
        }
    }

    @media (max-width: 480px) {
        h1 {
            font-size: 2em;
        }
        .filters {
            flex-direction: column; /* Stack filters vertically */
            align-items: stretch;
        }
        .filters select,
        .filters input,
        .filters button {
            width: 100%; /* Full width for filter controls */
            box-sizing: border-box;
        }
        .poster-tile {
            min-height: 220px;
        }
    }
  </style>
</head>
<body>

  <h1>Hindi Series Vault</h1>

  <div class="filters">
    <select onchange="filterByGenre(this.value)">
      <option value="All">All Genres</option>
      <option value="Crime">Crime</option>
      <option value="Thriller">Thriller</option>
      <option value="Drama">Drama</option>
      <option value="Comedy">Comedy</option>
      <option value="Action">Action</option>
      <option value="Spy">Spy</option>
      <option value="Mythological">Mythological</option>
      <option value="Historical">Historical</option>
      <option value="Political">Political</option>
      <option value="Military">Military</option>
      <option value="Slice of Life">Slice of Life</option>
      <option value="Legal">Legal</option>
      <option value="Teen">Teen</option>
      <option value="Sci-Fi">Sci-Fi</option>
      <option value="Biography">Biography</option>
      <option value="Sports">Sports</option>
      <option value="Period">Period</option>
      <option value="Financial">Financial</option>
      <option value="True Crime">True Crime</option>
      <option value="Newsroom">Newsroom</option>
      <option value="Medical">Medical</option>
      <option value="Eco-Crime">Eco-Crime</option>
    </select>

    <button onclick="filterMustWatch()">🎯 Must Watch (IMDb 9+)</button>

    <input type="text" placeholder="Search title..." oninput="searchTitles(this.value)">
    <select onchange="sortBy(this.value)">
      <option value="">Sort by…</option>
      <option value="popularity">Popularity</option>
      <option value="year">Year</option>
      <option value="imdbRating">IMDb Rating</option> <option value="titleAsc">A–Z</option>
      <option value="titleDesc">Z–A</option>
    </select>
  </div>

  <div id="hindiGrid" class="grid"></div>

  <button onclick="scrollTopSmooth()" id="topBtn" class="top-btn">⬆ Top</button>
  <button onclick="goHome()" class="home-btn">🏠 Collections Hub</button>

  <script>
    // Ensure hindirecommendations.js is loaded first, then this script executes
    // The hindiWatchlist data is expected to be available globally from hindirecommendations.js

    let currentList = [];
    let initialLoadDone = false; // Flag to ensure initial data is set

    function display(list) {
      const grid = document.getElementById("hindiGrid");
      if (!list || !list.length) {
        grid.innerHTML = "<p style='text-align:center; color: #ffeb3b; font-size: 1.2em; margin-top: 3rem;'>No series to display. Try adjusting your filters!</p>";
        return;
      }
      grid.innerHTML = list.map((show, i) => `
        <div class="poster-tile ${show.imdbRating >= 9 ? 'must-watch' : ''}" data-id="${show.id}">
          <div class="poster-info">
            <h3>${i + 1}. ${show.title}</h3>
            <div class="tags">
              <span class="tag">${show.platform}</span>
              <span class="tag" data-genre="${show.genre.toLowerCase()}">${show.genre}</span>
              <span class="tag">📅 ${show.year}</span>
              <span class="tag">🔥 ${show.popularity}%</span>
              <span class="tag">⭐ ${show.imdbRating}</span>
            </div>
            <p style="font-size: 0.9em; margin-top: 0.5rem; color: #d0e0ff;">
              Seasons: ${show.seasons}, Episodes: ${show.episodes}, Runtime: ${show.runtime}
            </p>
            
            <div class="description-container" id="desc-${show.id}">
                <p class="description-text">
                    ${show.description}
                </p>
            </div>
            <button class="description-toggle-btn" onclick="toggleDescription(event, '${show.id}')">View Details</button>
          </div>
        </div>
      `).join("");
    }

    // Function to toggle description visibility
    function toggleDescription(event, id) {
        const descriptionContainer = document.getElementById(`desc-${id}`);
        const button = event.target;
        const card = button.closest('.poster-tile');

        if (descriptionContainer.classList.contains('expanded')) {
            descriptionContainer.classList.remove('expanded');
            button.textContent = 'View Details';
            // Optional: Reduce card height if it was expanded significantly
            card.style.minHeight = '280px'; // Reset to base min-height
        } else {
            descriptionContainer.classList.add('expanded');
            button.textContent = 'Hide Details';
            // Optional: Adjust card height to fit content, or allow it to auto-expand
            card.style.minHeight = 'fit-content'; // Let it grow
            // After expansion, if it was too short before, force a reflow to recalculate min-height
            setTimeout(() => {
                card.style.minHeight = `${card.scrollHeight + 20}px`; // Add some buffer
            }, 700); // After transition finishes
        }
    }

    function filterByGenre(selectedGenre) {
      if (!initialLoadDone) return; // Prevent filters from running before data is ready
      if (selectedGenre === "All") {
        currentList = [...hindiWatchlist];
      } else {
        // Use includes for broader genre matching (e.g., "Crime Thriller" matches "Crime")
        currentList = hindiWatchlist.filter(s =>
          s.genre.toLowerCase().includes(selectedGenre.toLowerCase())
        );
      }
      display(currentList);
    }

    function filterMustWatch() {
      if (!initialLoadDone) return;
      currentList = hindiWatchlist.filter(s => s.imdbRating >= 9);
      display(currentList);
    }

    function searchTitles(query) {
      if (!initialLoadDone) return;
      currentList = hindiWatchlist.filter(s =>
        s.title.toLowerCase().includes(query.toLowerCase())
      );
      display(currentList);
    }

    function sortBy(type) {
      if (!initialLoadDone) return;
      let sorted = [...currentList];
      switch (type) {
        case "popularity":
          sorted.sort((a, b) => b.popularity - a.popularity); break;
        case "year":
          sorted.sort((a, b) => b.year - a.year); break;
        case "imdbRating":
          sorted.sort((a, b) => b.imdbRating - a.imdbRating); break; // Sort by IMDb Rating
        case "titleAsc":
          sorted.sort((a, b) => a.title.localeCompare(b.title)); break;
        case "titleDesc":
          sorted.sort((a, b) => b.title.localeCompare(a.title)); break;
      }
      display(sorted);
    }

    window.onload = () => {
      // Ensure hindiWatchlist is available from the external JS file
      if (typeof hindiWatchlist !== 'undefined') {
        currentList = [...hindiWatchlist];
        display(currentList);
        initialLoadDone = true;
        console.log("✅ Hindi Vault Loaded:", currentList.length);
      } else {
        console.error("❌ hindiWatchlist data not found. Make sure hindirecommendations.js is loaded correctly.");
        document.getElementById("hindiGrid").innerHTML = "<p style='text-align:center; color: #ff6666; font-size: 1.2em; margin-top: 3rem;'>Error loading data. Please check hindirecommendations.js file.</p>";
      }
    };

    window.onscroll = () => {
      document.getElementById("topBtn").style.display =
        window.scrollY > 400 ? "block" : "none";
    };

    function scrollTopSmooth() {
      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    function goHome() {
      window.location.href = "collections.html";
    }
  </script>

</body>
</html>
